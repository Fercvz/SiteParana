<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo do Paran√°</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js para gr√°ficos eleitorais -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>

    <div class="app-container">
        <!-- Professional Header -->
        <header class="site-header">
            <div class="brand-container">
                <h1>Mapa Interativo do Paran√°</h1>
                <p>Explore detalhes demogr√°ficos, econ√¥micos e pol√≠ticos dos 399 munic√≠pios.</p>
            </div>

            <div class="header-tools">
                <div class="search-container">
                    <input type="text" id="city-search" placeholder="Buscar cidade..." list="cities-list">
                    <datalist id="cities-list"></datalist>
                    <button id="search-btn" aria-label="Buscar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                </div>
                <button id="theme-toggle" aria-label="Alternar Tema">üåô</button>
            </div>
        </header>

        <!-- Main Content Area (Layout: Filters | Map | Details) -->
        <div class="main-content">

            <!-- Left Sidebar for Filters & Stats -->
            <aside class="left-sidebar">
                <div class="sidebar-section state-info">
                    <h3>Estado do Paran√°</h3>
                    <div class="info-card">
                        <div class="info-row">
                            <span>Cidades:</span>
                            <strong>399</strong>
                        </div>
                        <div class="info-row">
                            <span>Habitantes:</span>
                            <strong>~11.8 Milh√µes</strong>
                        </div>
                        <div class="info-row">
                            <span>Governador:</span>
                            <strong>Ratinho J√∫nior (PSD)</strong>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section visualization">
                    <h3>Visualiza√ß√£o</h3>
                    <div class="filter-group">
                        <label for="vis-mode">Modo de Mapa</label>
                        <select id="vis-mode">
                            <option value="none">Padr√£o</option>
                            <option value="party">Partidos Pol√≠ticos</option>
                            <option value="heatmap-pop"> Habitantes (Mapa de Calor) </option>
                            <option value="heatmap-pib"> PIB per capita (Mapa de Calor) </option>
                        </select>
                    </div>

                    <div id="map-legend" class="legend-container hidden">
                        <!-- Legend items injected by JS -->
                    </div>
                </div>

                <div class="sidebar-section filters">
                    <h3>Filtrar Cidades</h3>

                    <div class="filter-group">
                        <label for="filter-party">Partido (Prefeito)</label>
                        <select id="filter-party">
                            <option value="all">Todos</option>
                            <option value="PSD">PSD</option>
                            <option value="PL">PL</option>
                            <option value="PP">PP</option>
                            <option value="Uni√£o Brasil">Uni√£o Brasil</option>
                            <option value="Republicanos">Republicanos</option>
                            <option value="MDB">MDB</option>
                            <option value="PT">PT</option>
                            <option value="PDT">PDT</option>
                            <option value="Podemos">Podemos</option>
                            <!-- Add other parties dynamically if needed -->
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>Habitantes (m√≠nimo: <span id="val-pop">0</span>)</label>
                        <input type="range" id="filter-pop" min="0" max="2000000" step="10000" value="0">
                    </div>

                    <div class="filter-group">
                        <label>√Årea (km¬≤) (m√≠nimo: <span id="val-area">0</span>)</label>
                        <input type="range" id="filter-area" min="0" max="4000" step="100" value="0">
                    </div>

                    <button id="reset-filters">Limpar Filtros</button>
                    <p class="filter-note">Cidades destacadas: <strong id="highlight-count">399</strong></p>
                </div>
            </aside>

            <main class="map-container" id="map-container">
                <div id="map-svg-layer"
                    style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                    <div id="loading">Carregando mapa...</div>
                </div>
                <!-- SVG will be injected here -->

                <!-- Data Source Note -->
                <div class="data-source-note">
                    Informa√ß√µes do site do IBGE e dados eleitorais do STF (dados de 2024)
                </div>

                <div class="zoom-controls">
                    <button id="zoom-in" aria-label="Zoom In">+</button>
                    <button id="zoom-out" aria-label="Zoom Out">-</button>
                    <button id="zoom-reset" aria-label="Reset Zoom">‚ü≤</button>
                </div>
            </main>

            <!-- Tooltip -->
            <div id="tooltip" class="tooltip hidden"></div>

            <!-- Details Sidebar/Modal (Right) -->
            <aside id="sidebar" class="sidebar">
                <div class="sidebar-header">
                    <h2 id="city-name">Selecione uma cidade</h2>
                    <button id="close-sidebar" aria-label="Fechar">√ó</button>
                </div>

                <!-- Sistema de Abas -->
                <div class="sidebar-tabs">
                    <button class="tab-btn active" data-tab="info">üìã Informa√ß√µes</button>
                    <button class="tab-btn" data-tab="eleitorado">üó≥Ô∏è Eleitorado</button>
                </div>

                <!-- Aba: Informa√ß√µes -->
                <div class="tab-content active" id="tab-info">
                    <div class="sidebar-content" id="sidebar-details">
                        <p id="city-desc" class="description">Clique no mapa para ver detalhes.</p>

                        <!-- Campos de informa√ß√£o conforme especifica√ß√£o -->
                        <div class="details-list">
                            <div class="detail-row">
                                <strong>Nome da cidade:</strong> <span id="stat-nome">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>Gent√≠lico:</strong> <span id="stat-gentilico">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>Prefeito:</strong> <span id="stat-prefeito">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>Partido pol√≠tico:</strong> <span id="stat-partido">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>Habitantes:</strong> <span id="stat-habitantes">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>√Årea:</strong> <span id="stat-area">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>Densidade demogr√°fica:</strong> <span id="stat-densidade">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>IDHM:</strong> <span id="stat-idhm">-</span>
                            </div>
                            <div class="detail-row">
                                <strong>PIB per capita:</strong> <span id="stat-pib">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Aba: Eleitorado -->
                <div class="tab-content" id="tab-eleitorado">
                    <div class="eleitorado-content">
                        <!-- Total de Eleitores -->
                        <div class="eleitorado-header">
                            <div class="total-eleitores">
                                <span class="total-label">Total de Eleitores</span>
                                <span class="total-value" id="total-eleitores">-</span>
                            </div>
                        </div>

                        <!-- Gr√°ficos -->
                        <div class="chart-section">
                            <h4>üë• G√™nero</h4>
                            <div class="chart-container-small">
                                <canvas id="chart-genero"></canvas>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h4>üìä Faixa Et√°ria</h4>
                            <div class="chart-container">
                                <canvas id="chart-idade"></canvas>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h4>üéì Grau de Instru√ß√£o</h4>
                            <div class="chart-container">
                                <canvas id="chart-instrucao"></canvas>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h4>üíç Estado Civil</h4>
                            <div class="chart-container-small">
                                <canvas id="chart-civil"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
            </aside>
        </div>

        <!-- Chat Widget -->
        <div class="chat-widget-container">
            <button class="chat-toggle-btn" id="chat-toggle" aria-label="Abrir Chat IA">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
            </button>

            <div class="chat-window" id="chat-window">
                <div class="chat-header">
                    <h3>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 2a10 10 0 1 0 10 10H12V2z"></path>
                            <path d="M12 2a10 10 0 0 1 10 10h-10V2z"></path>
                            <path d="M12 12l9.5 5.5"></path>
                        </svg>
                        Paran√° AI Assistant
                    </h3>
                    <button class="chat-close" id="chat-close">√ó</button>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="message bot">
                        Ol√°! Sou sua intelig√™ncia artificial geogr√°fica. Pergunte sobre prefeitos, economia ou √∫ltimas
                        not√≠cias de qualquer cidade!
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Digite sua pergunta...">
                    <button class="chat-send" id="chat-send">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>

</html>